System.register("chunks:///_virtual/Joystick.ts",["cc"],(function(t){"use strict";var i,e,o,n,r,s,c,a,l,u,p,y,h;return{setters:[function(t){i=t.cclegacy,e=t._decorator,o=t.EventTarget,n=t.Node,r=t.Enum,s=t.Vec3,c=t.Vec2,a=t.CCInteger,l=t.UITransform,u=t.Size,p=t.UIOpacity,y=t.SystemEventType,h=t.Component}],execute:function(){var d,f,T,g,v,b,_,O,m,E,L,k,S,w,C,z,P;function F(t,i,e,o){e&&Object.defineProperty(t,i,{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(o):void 0})}function I(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t,i,e,o,n){var r={};return Object.keys(o).forEach((function(t){r[t]=o[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=e.slice().reverse().reduce((function(e,o){return o(t,i,e)||e}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,i,r),r=null),r}t({DirectionType:void 0,JoystickType:void 0,SpeedType:void 0}),i._RF.push({},"73162lxt5BLxbtr/vpxLfXd","Joystick",void 0);var U,A,N,D=e.ccclass,J=e.property,j=t("instance",new o),H=t("SET_JOYSTICK_TYPE","SET_JOYSTICK_TYPE");!function(t){t[t.FOUR=0]="FOUR",t[t.EIGHT=1]="EIGHT",t[t.ALL=2]="ALL"}(U||(U=t("DirectionType",{}))),function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.FAST=2]="FAST"}(A||(A=t("SpeedType",{}))),function(t){t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW"}(N||(N=t("JoystickType",{})));t("Joystick",(d=D("Joystick"),f=J({type:n,displayName:"Dot",tooltip:"摇杆操纵点"}),T=J({type:n,displayName:"Ring",tooltip:"摇杆背景节点"}),g=J({type:r(N),displayName:"Touch Type",tooltip:"触摸类型"}),v=J({type:r(U),displayName:"Direction Type",tooltip:"方向类型"}),b=J({type:s,tooltip:"摇杆所在位置"}),_=J({type:c,tooltip:"触摸位置"}),O=J({type:a,displayName:"Ring Radius",tooltip:"半径"}),d((L=R((E=function(t){var i,e;function o(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return F(I(i=t.call.apply(t,[this].concat(o))||this),"dot",L,I(i)),F(I(i),"ring",k,I(i)),F(I(i),"joystickType",S,I(i)),F(I(i),"directionType",w,I(i)),F(I(i),"_stickPos",C,I(i)),F(I(i),"_touchLocation",z,I(i)),F(I(i),"radius",P,I(i)),i}e=t,(i=o).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var n=o.prototype;return n.onLoad=function(){var t;if(this.dot)if(this.ring){var i=this.ring.getComponent(l),e=2*this.radius,o=new u(e,e);null==i||i.setContentSize(o),null===(t=this.ring.getChildByName("bg").getComponent(l))||void 0===t||t.setContentSize(o),this._initTouchEvent();var n=this.node.getComponent(p);this.joystickType===N.FOLLOW&&n&&(n.opacity=0)}else console.warn("Joystick Ring is null!");else console.warn("Joystick Dot is null!")},n.onEnable=function(){j.on(H,this._onSetJoystickType,this)},n.onDisable=function(){j.off(H,this._onSetJoystickType,this)},n._onSetJoystickType=function(t){this.joystickType=t;var i=this.node.getComponent(p);i&&(i.opacity=t===N.FIXED?255:0)},n._initTouchEvent=function(){this.node.on(y.TOUCH_START,this._touchStartEvent,this),this.node.on(y.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(y.TOUCH_END,this._touchEndEvent,this),this.node.on(y.TOUCH_CANCEL,this._touchEndEvent,this)},n._touchStartEvent=function(t){if(this.ring&&this.dot){j.emit(y.TOUCH_START,t);var i=t.getUILocation(),e=new s(i.x,i.y);if(this.joystickType===N.FIXED){this._stickPos=this.ring.getPosition();var o=e.subtract(this.ring.getPosition()),n=o.length();this.radius>n&&this.dot.setPosition(o)}else this.joystickType===N.FOLLOW&&(this._stickPos=e,this.node.getComponent(p).opacity=255,this._touchLocation=t.getUILocation(),this.ring.setPosition(e),this.dot.setPosition(new s))}},n._touchMoveEvent=function(t){if(this.dot&&this.ring){if(this.joystickType===N.FOLLOW&&this._touchLocation===t.getUILocation())return!1;var i=t.getUILocation(),e=new s(i.x,i.y).subtract(this.ring.getPosition()),o=e.length(),n=A.NORMAL;this.radius>o?(this.dot.setPosition(e),n=A.NORMAL):(this.dot.setPosition(e.normalize().multiplyScalar(this.radius)),n=A.FAST),j.emit(y.TOUCH_MOVE,t,{speedType:n,moveVec:e.normalize()})}},n._touchEndEvent=function(t){this.dot&&this.ring&&(this.dot.setPosition(new s),this.joystickType===N.FOLLOW&&(this.node.getComponent(p).opacity=0),j.emit(y.TOUCH_END,t,{speedType:A.STOP}))},o}(h)).prototype,"dot",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=R(E.prototype,"ring",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=R(E.prototype,"joystickType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.FIXED}}),w=R(E.prototype,"directionType",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.ALL}}),C=R(E.prototype,"_stickPos",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),z=R(E.prototype,"_touchLocation",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),P=R(E.prototype,"radius",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),m=E))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["cc","./Joystick.ts"],(function(e){"use strict";var i,t,o,n,r,a,l,p,s,c,u,d;return{setters:[function(e){i=e.cclegacy,t=e._decorator,o=e.PhysicsSystem2D,n=e.CCInteger,r=e.Vec3,a=e.RigidBody2D,l=e.SystemEventType,p=e.misc,s=e.Vec2,c=e.Component},function(e){u=e.SpeedType,d=e.instance}],execute:function(){var y,h,b,f,v,m,S,_,T,g,w,z,O,P,D,M,C;function E(e,i,t,o){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(o):void 0})}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function k(e,i,t,o,n){var r={};return Object.keys(o).forEach((function(e){r[e]=o[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=t.slice().reverse().reduce((function(t,o){return o(e,i,t)||t}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,i,r),r=null),r}i._RF.push({},"ba452nnVcJMPYIauwJ4Favx","Player",void 0);var F=t.ccclass,V=t.property;o.instance.enable=!0;e("default",(y=F("Player"),h=V({displayName:"刚体模式",tooltip:"不会立即停止"}),b=V({displayName:"Move Dir",tooltip:"移动方向"}),f=V({tooltip:"速度级别"}),v=V({type:n,tooltip:"移动速度"}),m=V({type:n,tooltip:"停止时速度"}),S=V({type:n,tooltip:"正常速度"}),_=V({type:n,tooltip:"最快速度"}),y((w=k((g=function(e){var i,t;function o(){for(var i,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return E(R(i=e.call.apply(e,[this].concat(o))||this),"rigidbody",w,R(i)),E(R(i),"moveDir",z,R(i)),E(R(i),"_speedType",O,R(i)),E(R(i),"_moveSpeed",P,R(i)),E(R(i),"stopSpeed",D,R(i)),E(R(i),"normalSpeed",M,R(i)),E(R(i),"fastSpeed",C,R(i)),j(R(i),"_body",null),i}t=e,(i=o).prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t;var n=o.prototype;return n.onLoad=function(){this.rigidbody&&(this._body=this.node.getComponent(a)),d.on(l.TOUCH_START,this.onTouchStart,this),d.on(l.TOUCH_MOVE,this.onTouchMove,this),d.on(l.TOUCH_END,this.onTouchEnd,this)},n.onTouchStart=function(){},n.onTouchMove=function(e,i){this._speedType=i.speedType,this.moveDir=i.moveVec,this.onSetMoveSpeed(this._speedType)},n.onTouchEnd=function(e,i){this._speedType=i.speedType,this.onSetMoveSpeed(this._speedType)},n.onSetMoveSpeed=function(e){switch(e){case u.STOP:this._moveSpeed=this.stopSpeed;break;case u.NORMAL:this._moveSpeed=this.normalSpeed;break;case u.FAST:this._moveSpeed=this.fastSpeed}},n.move=function(){if(this.node.angle=p.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x))-90,this.rigidbody&&this._body){var e=this.moveDir.clone().multiplyScalar(this._moveSpeed/20),i=new s(e.x,e.y);this._body.applyForceToCenter(i,!0)}else{var t=this.node.getPosition().add(this.moveDir.clone().multiplyScalar(this._moveSpeed/60));console.log(this._moveSpeed/60),this.node.setPosition(t),console.log(t)}},n.update=function(e){this._speedType!==u.STOP&&this.move()},o}(c)).prototype,"rigidbody",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=k(g.prototype,"moveDir",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new r(0,1,0)}}),O=k(g.prototype,"_speedType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.STOP}}),P=k(g.prototype,"_moveSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=k(g.prototype,"stopSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=k(g.prototype,"normalSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),C=k(g.prototype,"fastSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),T=g))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/UI.ts",["cc","./Joystick.ts"],(function(t){"use strict";var e,o,c,r,n,s;return{setters:[function(t){e=t.cclegacy,o=t._decorator,c=t.Component},function(t){r=t.instance,n=t.SET_JOYSTICK_TYPE,s=t.JoystickType}],execute:function(){var i;e._RF.push({},"df968oG9ClOtaKssOzeyetw","UI",void 0);var u=o.ccclass;t("UI",u("UI")(i=function(t){var e,o;function c(){return t.apply(this,arguments)||this}o=t,(e=c).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var i=c.prototype;return i.useFixedType=function(){r.emit(n,s.FIXED)},i.useFollowType=function(){r.emit(n,s.FOLLOW)},c}(c))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Joystick.ts","./Player.ts","./UI.ts"],(function(){"use strict";return{setters:[function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});